{% extends "base.html" %}
{% block content %}

{% load static %}

<div style="position:fixed;width:auto;height:auto;right:30px;bottom:30px;background-color:rgba(255,255,255,0.7);border-radius:10px;text-align:center;padding:10px">
<p><a class="trans" href="#top" style="color:black">ページ先頭</a></p>
<p><a class="trans" href="#{{league}}" style="color:black">{{league}}</a></p>
{% for LB in LBs %}
<p>
<a class="trans" href="#{{LB.map.diff}}" style="color:black">
{{LB.map.title | truncatechars:15}}
</a>
</p>
{% endfor %}
</div>

<h2 style="text-align:center;color:{{Linfo.fontcolor}}">{{league}} リーグ Leaderboard</h2>
<p style="text-align:right">
<a href="{% url 'app:submission' %}">
スコア手動提出
</a>
</p>
<p style="text-align:right">スコア取得日時 {{utime.time}}</p>
<div id="{{league}}" class="border8-target" style="background-color:{{Linfo.bgcolor}};padding:50px;border-radius:20px">
<table class="table table-striped table-borderless">
<thead>
<tr style="color:{{Linfo.fontcolor}}">
<th>順位</th>
<th>プレイヤー名</th>
<th>総合<br>順位点</th>
<th>総合<br>精度</th>
<th>ひとこと</th>
</tr>
</thead>
<tbody style="color:black">
{% for s in scored_rank %}
<tr>
<td width="50px">
{% if s.abstein or s.acc == 0%}
--
{% else %}
#{{s.rank}}
{% endif %}
</td>
<td width="150px">
<img src="{% static 'users/' %}{{s.player.sid}}.jpg" style="height:30px;width:30px;border-radius:15px;">
{{s.player.name}}
{% if s.player.abstein %}（棄権）{% endif %}
</td>
<td width="70px">{{s.pos}}</td>
<td width="70px">{{s.acc|floatformat:2}}</td>
<td>{{s.player.profile}}</td>
</tr>
<p>{{t.name}}</p>
{% endfor %}
</tbody>
</table>
<a class = "border8-trigger" href="#{{league}}">すべて表示</a>
</div>
<hr>
<h2 style="text-align:center">譜面別リーグ内順位</h2>
{% for LB in LBs%}

<p><span style="font-size:22px;font-weight:bold">{{LB.map.title}} <span
style="color:{{LB.color}}">{{LB.map.label}}</span></span> by {{LB.map.author}}
<a href="https://beatsaver.com/maps/{{LB.map.bsr}}" target="blank">
<img src="{% static 'beatsaver.png' %}" style="height:20px;width:20px">
</a>
<a href="https://scoresaber.com/leaderboard/{{LB.map.diff}}" target="blank">
<img src="{% static 'ScoreSaberLogo.svg' %}" style="height:20px;width:20px">
</a>
<a href="/mapboard/?map={{LB.map.diff}}">
<img src="{% static 'icon.png' %}" style="height:20px;width:20px">
</a>
</p>
<div id="{{LB.map.diff}}" class="top5-target" style="background-color:{{Linfo.bgcolor}};padding:30px;border-radius:20px;">
<div style="display:flex">
<img src="https://scoresaber.com/imports/images/songs/{{LB.map.hash}}.png"
style="height:128px;width:128px;border-radius:10px;border:solid;border-color:black">
<table class="table table-striped table-borderless" style="margin-left:30px">
<tr style="color:{{Linfo.fontcolor}}">
<th>順位</th>
<th>プレイヤー名</th>
<th>順位点</th>
<th>精度</th>
</tr>
<tbody style="color:black">
{% for p in LB.players %}
<tr>
<td width="20px">
{% if p.abstein or p.acc == 0 %}
--
{% else %}
#{{p.rank}}
{% endif %}
</td>
<td width="20px">
<img src="{% static 'users/' %}{{p.sid}}.jpg"
style="height:30px;width:30px;border-radius:15px;">
{{p.name}}
{% if p.abstein %}（棄権）{% endif %}
</td>
<td width="20px">{{p.pos}}</td>
<td width="200px">{{p.acc|floatformat:2}}%</td>
</tr>
{% endfor %}
</tbody>
</table>
</div>
{% if scored_rank|length > 5 %}
<a class="top5-trigger" href="#{{LB.map.diff}}" style="margin-left:158px">すべて表示</a>
{% endif %}
</div>
{% endfor %}
{% endblock %}